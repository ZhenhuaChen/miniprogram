<view class="container">
  <!-- ç§¯åˆ†æ€»è§ˆ -->
  <view class="points-header">
    <view class="points-card">
      <text class="points-number">{{totalPoints}}</text>
      <text class="points-label">æˆ‘çš„ç§¯åˆ†</text>
    </view>
  </view>

  <!-- ç§¯åˆ†å•†åŸ -->
  <view class="rewards-section">
    <view class="section-title">ç§¯åˆ†å•†åŸ</view>
    <view class="rewards-list">
      <view 
        class="reward-item" 
        wx:for="{{rewards}}" 
        wx:key="id"
        bindtap="showExchange"
        data-index="{{index}}"
      >
        <view class="reward-icon">{{item.icon}}</view>
        <view class="reward-content">
          <text class="reward-title">{{item.title}}</text>
          <text class="reward-desc">{{item.desc}}</text>
        </view>
        <view class="reward-points">
          <text class="points-cost">{{item.points}}ç§¯åˆ†</text>
          <text class="exchange-btn" wx:if="{{totalPoints >= item.points}}">å…‘æ¢</text>
          <text class="disabled-btn" wx:else>ç§¯åˆ†ä¸è¶³</text>
        </view>
      </view>
    </view>
  </view>

  <!-- è·å–ç§¯åˆ†æ–¹å¼ -->
  <view class="earn-section">
    <view class="section-title">å¦‚ä½•è·å¾—ç§¯åˆ†ï¼Ÿ</view>
    <view class="earn-list">
      <view class="earn-item">
        <view class="earn-icon">ğŸ¯</view>
        <view class="earn-content">
          <text class="earn-title">æ¯æ—¥å­¦ä¹ </text>
          <text class="earn-desc">+5ç§¯åˆ†</text>
        </view>
      </view>
      <view class="earn-item">
        <view class="earn-icon">ğŸ‘¥</view>
        <view class="earn-content">
          <text class="earn-title">é‚€è¯·å¥½å‹</text>
          <text class="earn-desc">+50ç§¯åˆ†</text>
        </view>
      </view>
      <view class="earn-item">
        <view class="earn-icon">ğŸ“–</view>
        <view class="earn-content">
          <text class="earn-title">å®Œæˆç« èŠ‚</text>
          <text class="earn-desc">+10ç§¯åˆ†</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç§¯åˆ†è®°å½• -->
  <view class="history-section" wx:if="{{pointsHistory.length > 0}}">
    <view class="section-title">ç§¯åˆ†è®°å½•</view>
    <view class="history-list">
      <view 
        class="history-item" 
        wx:for="{{pointsHistory}}" 
        wx:key="index"
      >
        <view class="history-content">
          <text class="history-desc">{{item.description}}</text>
          <text class="history-date">{{item.date}}</text>
        </view>
        <view class="history-points {{item.points > 0 ? 'positive' : 'negative'}}">
          {{item.points > 0 ? '+' : ''}}{{item.points}}
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{pointsHistory.length === 0 && !loading}}">
    <text class="empty-text">æš‚æ— ç§¯åˆ†è®°å½•</text>
    <text class="empty-tip">å¼€å§‹å­¦ä¹ æˆ–é‚€è¯·å¥½å‹æ¥è·å¾—ç§¯åˆ†å§ï¼</text>
  </view>

  <!-- å…‘æ¢ç¡®è®¤æ¨¡æ€æ¡† -->
  <view class="modal-mask" wx:if="{{showExchangeModal}}" bindtap="hideExchangeModal">
    <view class="modal-content" catchtap="">
      <view class="modal-header">
        <text class="modal-title">ç¡®è®¤å…‘æ¢</text>
      </view>
      <view class="modal-body">
        <view class="reward-preview">
          <text class="preview-icon">{{selectedReward.icon}}</text>
          <text class="preview-title">{{selectedReward.title}}</text>
          <text class="preview-desc">{{selectedReward.desc}}</text>
          <text class="preview-cost">éœ€è¦æ¶ˆè€— {{selectedReward.points}} ç§¯åˆ†</text>
        </view>
      </view>
      <view class="modal-footer">
        <button class="cancel-btn" bindtap="hideExchangeModal">å–æ¶ˆ</button>
        <button class="confirm-btn" bindtap="confirmExchange">ç¡®è®¤å…‘æ¢</button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-mask">
    <view class="loading-content">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>